Подключение Кредитного Сервиса

Варианты размещения

    1. Под каждым товаром, цена которого выше 15 тысяч рублей, мы размещаем кнопку "купить в кредит". Кнопка может быть как наша, 
       так и стилизована под Ваш дизайн
  
    2. При нажатии на кнопку появляется всплывающее окно, при этом основная страница затемняется. В окне - наша кредитная заявка.
  
    3. После заполнения заявки, покупатель получает подтверждающую надпись и закрывает окно.
  
    4. После закрытия окна покупатель автоматически попадает на стадию оформления заказа. В заказе один товар, на который была отправлена заявка.
  
Второй вариант пользовательских действий:
  
    1. Покупатель нажимает на кнопку "добавить в корзину" и продолжает покупки на сайте.
  
    2. Покупатель переходит в корзину, где мы размещаем кнопку "купить в кредит".
  
    3. При нажатии повторяются шаги 2.3.4 из предыдущего варианта.


Установка формы

1. Скопируйте содержимое архива  (папку yescreditservice) в корень веб-сервера.


2. В шаблоне карточки товара или в том месте, где происходит загрузка сторонних javascript библиотек 
   добавьте строчки (как в прилагаемом файле test.htm)

    <script src="yescredit/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="yescredit/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>
    <script src="yescredit/js/yescredit.js" type="text/javascript"></script>
    <link href="yescredit/css/cupertino/jquery-ui-1.8.18.custom.css" rel="stylesheet" type="text/css" />

3. В шаблоне карточки товара, в любом удобном месте (например, рядом с кнопкой "в корзину") разместите
   кнопку "Купить в кредит". Для этого просто скопируйте код существующей кнопки "положить в корзину",
   переименуйте ее и добавьте в событие onClick вызов формы кредитной заявки:

<div style="float:left;">
    <a title="Купить в кредит" onclick="productAddToCartForm.submit(this);yescreditdialog();)" href="javascript:;">
        <img src="yescredit/images/yescreditbuy.png">
    </a>
</div>

   Для правильной работы формы, в качестве аргумента в yescreditdialog необходимо
   передать следующие данные в формате JSON: название товара, количество, цена в таком виде:

   yescreditdialog([{MODEL: "Apple iPhone 4S 16GB", COUNT:"1", PRICE:"10000"},{MODEL: " Чехол для Apple iPhone 4S", COUNT:"1", PRICE:"500"}],2);
   
   Т.е. в результате html код сгенерированной страницы карточки товара должен выглядеть следующим образом:
   
<div style="float:left;">
    <a title="Купить в кредит" onclick='productAddToCartForm.submit(this);
		yescreditdialog([{MODEL: "Apple iPhone 4S 16GB", COUNT:"1", PRICE:"10000"},{MODEL: " Чехол для Apple iPhone 4S", COUNT:"1", PRICE:"500"}],2);' 
     href="javascript:;">
        <img src="add-to-cart-btn.png">
    </a>
</div>
   
   Обратите внимание, что для правильной работы параметры для события onClick нужно передавать в одинарных кавычках, а JSON в двойных.
   
   В шаблоне карточки товара это может выглядеть следующим образом:
   <?php
        
        ... your code ...
        
        
        $args = array('MODEL' => $my_product_name, 'COUNT' => $q, 'PRICE' => $price);
        
    ?>
    <div style="float:left;">
    <a title="Купить в кредит" onclick='productAddToCartForm.submit(this);yescreditdialog("<? json_encode($args); ?>",2);'
     href="javascript:;">
        <img src="add-to-cart-btn.png">
    </a>
</div>

ВНИМАНИЕ !!!

Второй параметр функции yescreditdialog, равен:

0 - только кредит
1 - только рассрочка
2 - и кредит и рассрочка


4. Отправьте тестовую заявку, свяжитесь со службой технической поддержки, получите MERCHANTID и укажите его в файле index.php на строке ~49   
   
5. Если выполнить п.3 в корзине, и добавить кнопку "Оформить в кредит" то заявка будет оформляться на все выбранные товары.

